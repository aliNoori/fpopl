import{e as V,f as $,r as p,g as B,h as E,c as r,o as u,a as e,i as I,t as a,n as N,F as j,j as A,k as h,_ as D}from"./Bx4IiK4l.js";const F={class:"phone-page"},M={class:"form-group floating-label",style:{position:"relative"}},R={class:"country-info"},L={class:"flag"},P={class:"country-name"},S=["value"],q={key:0,class:"country-list"},z=["onClick"],O={class:"form-group floating-label"},T={class:"phone-box"},G={class:"dial-code"},H=["value"],J={for:"mobile"},K=["disabled"],Q=V({__name:"index",setup(U){const m=$(()=>c(t.value).length===10),_=B(),g=E(),w=g.$axios,d=g.$toPersian;function c(n){return n.replace(/[۰-۹]/g,o=>String("۰۱۲۳۴۵۶۷۸۹".indexOf(o)))}const f=[{name:"ایران",code:"IR",flag:"🇮🇷",dialCode:"+98"},{name:"ترکیه",code:"TR",flag:"🇹🇷",dialCode:"+90"},{name:"افغانستان",code:"AF",flag:"🇦🇫",dialCode:"+93"}],s=p(f[0]),i=p(!1),y=n=>{s.value=n,i.value=!1},t=p("");async function C(){try{await k();const n=s.value.dialCode+c(t.value),o=s.value.code;await _.push({path:"/verify",query:{phone:n,country:o}})}catch(n){console.error("Error sending code or navigating:",n)}}function x(n){const l=n.target.value,v=l.replace(/[^\d]/g,""),b=v.slice(-1);t.value.length===0&&b==="0"||(l.length<t.value.length?t.value=t.value.slice(0,-1):t.value+=v.slice(-1),t.value=d(t.value))}async function k(){try{const n=await w.post("auth/send-verification-code",{phone:c(t.value),country:s.value.dialCode});console.log("Code sent:",n.data)}catch(n){console.error("Error sending verification code:",n)}}return(n,o)=>(u(),r("div",F,[o[5]||(o[5]=e("h1",null,"شماره تلفن",-1)),o[6]||(o[6]=e("p",{class:"subtext"},"لطفاً کشور را انتخاب و سپس شماره رو وارد کنید",-1)),e("div",M,[e("div",{class:"country-box",onClick:o[0]||(o[0]=l=>i.value=!i.value)},[e("div",R,[e("span",L,a(s.value.flag),1),e("span",P,a(s.value.name),1)]),(u(),r("svg",{class:N(["arrow",{rotated:i.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},o[1]||(o[1]=[e("path",{d:"M9 18l6-6-6-6"},null,-1)]),2)),e("input",{type:"text",readonly:"",placeholder:" ",id:"country",value:s.value.name+" "+s.value.flag,class:"hidden-input"},null,8,S),o[2]||(o[2]=e("label",{for:"country"},"کشور",-1))]),i.value?(u(),r("ul",q,[(u(),r(j,null,A(f,l=>e("li",{key:l.code,onClick:v=>y(l)},a(l.name)+" "+a(l.flag),9,z)),64))])):I("",!0)]),e("div",O,[e("div",T,[e("span",G,a(h(d)(s.value.dialCode)),1),o[3]||(o[3]=e("div",{class:"divider"},null,-1)),e("input",{type:"tel",value:t.value,onInput:x,inputmode:"numeric",maxlength:"10"},null,40,H),e("label",J,a(h(d)("شماره موبایل")),1)])]),e("button",{onClick:C,disabled:!m.value,class:"continue-btn"},o[4]||(o[4]=[e("span",{class:"btn-text"},"ادامه",-1),e("span",{class:"divider-line"},null,-1),e("svg",{class:"arrow-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M9 18l6-6-6-6"})],-1)]),8,K)]))}}),X=D(Q,[["__scopeId","data-v-2a634d55"]]);export{X as default};
